<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bhagavad Gita</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="css/styles.css">
    <meta name="theme-color" content="#E6A623">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <header id="header">
        <button id="back-btn" style="display:none;"><i class="fas fa-arrow-left"></i></button>
        <h1>à¤­à¤—à¤µà¤¦à¥ à¤—à¥€à¤¤à¤¾</h1>
        <div class="header-buttons">
            <button id="ai-btn">
                <img src="images/SarthiAI.png" alt="Sarthi AI" class="ai-icon-img">
            </button>
        </div>
    </header>
    <main id="main-content">
        <div id="chapters-screen" class="screen active">
            <div id="chapters-list"></div>
        </div>
        <div id="verses-screen" class="screen">
            <h2 id="chapter-title"></h2>
            <div id="chapter-video-container" class="chapter-video-container" style="display: none;">
                <div class="video-carousel">
                    <div class="video-carousel-track">
                        <div class="video-slide" data-lang="english">
                            <div class="video-lang-badge">ğŸ‡¬ğŸ‡§ English</div>
                            <div class="video-wrapper">
                                <iframe id="chapter-video-iframe-english" 
                                        frameborder="0" 
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                        referrerpolicy="strict-origin-when-cross-origin"
                                        playsinline
                                        allowfullscreen>
                                </iframe>
                            </div>
                        </div>
                        <div class="video-slide" data-lang="hindi">
                            <div class="video-lang-badge">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤‚à¤¦à¥€</div>
                            <div class="video-wrapper">
                                <iframe id="chapter-video-iframe-hindi" 
                                        frameborder="0" 
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                        referrerpolicy="strict-origin-when-cross-origin"
                                        playsinline
                                        allowfullscreen>
                                </iframe>
                            </div>
                        </div>
                    </div>
                    <div class="video-carousel-dots">
                        <span class="dot active" data-lang="english"></span>
                        <span class="dot" data-lang="hindi"></span>
                    </div>
                </div>
            </div>
            <div id="verses-list"></div>
        </div>
        <div id="verse-detail-screen" class="screen">
            <div id="verse-sanskrit-card" class="glass-card">
                <div id="verse-text"></div>
                <div id="verse-transliteration"></div>
            </div>
            
            <div id="verse-translation-card" class="glass-card">
                <div class="verse-card-header">
                    <div class="language-controls">
                        <div class="language-dropdown-container">
                            <select id="language-dropdown" class="language-dropdown">
                                <option value="english">English</option>
                                <option value="hindi" selected>à¤¹à¤¿à¤‚à¤¦à¥€</option>
                                <option value="gujarati">àª—à«àªœàª°àª¾àª¤à«€</option>
                            </select>
                        </div>
                        <button id="sarthi-ai-pill" class="sarthi-ai-pill" title="AI-powered translation and summary">âœ¨SarthiAI</button>
                    </div>
                    <button id="bookmark-btn" class="bookmark-btn">
                        <i class="fas fa-heart"></i>
                    </button>
                </div>
                <div id="verse-translation"></div>
            </div>
        </div>
        <div id="ai-setup-screen" class="screen">
            <div class="glass-card ai-setup-card">
                <div class="ai-setup-header">
                    <img src="images/SarthiAI.png" alt="Sarthi AI" class="ai-icon-img ai-setup-icon">
                    <h2>Sarthi AI</h2>
                    <p>Your spiritual guide through the Bhagavad Gita</p>
                </div>
                <div class="ai-setup-content">
                    <p>To use Sarthi AI, please enter your Gemini API Key:</p>
                    <div class="api-key-input-group">
                        <input type="password" id="api-key-input" placeholder="Enter your Gemini API Key" />
                        <button id="toggle-api-key-visibility">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <button id="save-api-key-btn" class="ai-save-btn">Save & Continue</button>
                    <div class="api-key-help">
                        <p><small>Get your free API key from <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a></small></p>
                    </div>
                </div>
            </div>
        </div>
        <div id="ai-chat-screen" class="screen">
            <div id="ai-chat-container">
                <div id="ai-chat-header">
                    <img src="images/SarthiAI.png" alt="Sarthi AI" class="ai-icon-img">
                    <span>Sarthi AI</span>
                    <button id="clear-chat-btn" title="Clear Chat History">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                <div id="ai-chat-messages"></div>
                <div id="ai-starter-prompts">
                    <div class="starter-prompts-carousel">
                        <div class="starter-prompt" data-prompt="I am feeling lost and confused about my life purpose">
                            ğŸ¯ Life Purpose
                        </div>
                        <div class="starter-prompt" data-prompt="I am struggling with anger and negative emotions">
                            ğŸ™ Anger Control
                        </div>
                        <div class="starter-prompt" data-prompt="I am worried about results and outcomes of my actions">
                            ğŸŒ± Detachment
                        </div>
                        <div class="starter-prompt" data-prompt="How can I find inner peace and reduce stress?">
                            âœ¨ Inner Peace
                        </div>
                        <div class="starter-prompt" data-prompt="I am facing difficult decisions and need guidance">
                            ğŸ§  Decision Making
                        </div>
                        <div class="starter-prompt" data-prompt="How do I overcome fear and self-doubt?">
                            ğŸ’ª Overcome Fear
                        </div>
                    </div>
                </div>
                <div id="ai-chat-input-container">
                    <input type="text" id="ai-chat-input" placeholder="Ask your question..." />
                    <button id="ai-send-btn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Settings Screen -->
        <div id="settings-screen" class="screen">
            <div class="glass-card settings-card">
                <div class="settings-header">
                    <h2>Settings</h2>
                    <p>Manage your app preferences</p>
                </div>
                <div class="settings-content">
                    <div class="setting-item">
                        <h3><img src="images/SarthiAI.png" alt="Sarthi AI" class="sarthi-icon"> Sarthi AI Configuration</h3>
                        <p>Enter your Google Gemini API key to enable AI-powered spiritual guidance and verse recommendations</p>
                        <div class="api-key-input-group">
                            <input type="password" id="settings-api-key-input" placeholder="sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxx" />
                            <button id="toggle-settings-api-key-visibility">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="api-key-help">
                            <small><i class="fas fa-info-circle"></i> Get your free API key from <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a></small>
                        </div>
                        <div class="api-key-buttons">
                            <button id="update-api-key-btn" class="api-key-btn">
                                <i class="fas fa-save"></i> Save
                            </button>
                            <button id="remove-api-key-btn" class="api-key-btn remove-btn">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <h3>âœ¨ Sarthi Translate</h3>
                        <p>Set your preferred language for AI-powered verse translation and summary</p>
                        <div class="language-preference-group">
                            <select id="sarthi-translate-language" class="language-select">
                                <option value="english">ğŸ‡¬ğŸ‡§ English</option>
                                <option value="hindi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤‚à¤¦à¥€ (Hindi)</option>
                                <option value="gujarati">ğŸ‡®ğŸ‡³ àª—à«àªœàª°àª¾àª¤à«€ (Gujarati)</option>
                                <option value="bengali">ğŸ‡®ğŸ‡³ à¦¬à¦¾à¦‚à¦²à¦¾ (Bengali)</option>
                                <option value="tamil">ğŸ‡®ğŸ‡³ à®¤à®®à®¿à®´à¯ (Tamil)</option>
                                <option value="telugu">ğŸ‡®ğŸ‡³ à°¤à±†à°²à±à°—à± (Telugu)</option>
                                <option value="marathi">ğŸ‡®ğŸ‡³ à¤®à¤°à¤¾à¤ à¥€ (Marathi)</option>
                                <option value="kannada">ğŸ‡®ğŸ‡³ à²•à²¨à³à²¨à²¡ (Kannada)</option>
                                <option value="punjabi">ğŸ‡®ğŸ‡³ à¨ªà©°à¨œà¨¾à¨¬à©€ (Punjabi)</option>
                                <option value="spanish">ğŸ‡ªğŸ‡¸ EspaÃ±ol (Spanish)</option>
                                <option value="arabic">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Arabic)</option>
                                <option value="chinese">ğŸ‡¨ğŸ‡³ ä¸­æ–‡ (Chinese)</option>
                            </select>
                        </div>
                        <button id="save-translate-language-btn" class="api-key-btn">
                            <i class="fas fa-save"></i> Save
                        </button>
                        <div class="api-key-help">
                            <small><i class="fas fa-info-circle"></i> This language will be used for AI-powered verse translations and summaries</small>
                        </div>
                    </div>

                    <div class="setting-item">
                        <h3>ğŸµ Audio Preferences</h3>
                        <p>Customize your audio experience</p>
                        <div class="setting-toggle">
                            <label class="toggle-label">
                                <input type="checkbox" id="show-audio-player-toggle" class="toggle-checkbox">
                                <span class="toggle-switch"></span>
                                <span class="toggle-text">Show Sanskrit Sloka Audio Player</span>
                            </label>
                            <small class="setting-description">Enable audio playback for Sanskrit verses on the translation screen</small>
                        </div>
                    </div>
                </div>
                <div class="settings-footer">
                    <span id="cache-version">App Version: loading...</span>
                    <div><a href="https://simkeyur.github.io" target="_blank">Submit Feedback</a></div>
                </div>
            </div>
        </div>
        
        <!-- Bookmarks Screen -->
        <div id="bookmarks-screen" class="screen">
            <div class="bookmarks-header">
                <h2>Bookmarked Slokas</h2>
                <p>Your favorite verses from the Bhagavad Gita</p>
            </div>
            <div id="bookmarks-list" class="bookmarks-list">
                <!-- Bookmarked verses will be dynamically added here -->
            </div>
        </div>
    </main>
    
    <!-- Floating Settings/Bookmarks Button -->
    <div id="floating-settings-btn" class="floating-settings-btn">
        <button id="main-floating-btn" class="main-floating-btn">
            <i class="fas fa-cog"></i>
        </button>
        <div id="floating-menu" class="floating-menu">
            <button id="settings-btn" class="floating-option-btn">
                <i class="fas fa-cog"></i>
            </button>
            <button id="bookmarks-btn" class="floating-option-btn">
                <i class="fas fa-heart"></i>
            </button>
        </div>
    </div>
    <div id="verse-navigation" style="display: none;">
        <button id="prev-verse-btn">
            <i class="fas fa-chevron-left"></i>
        </button>
        <div id="verse-slider-container">
            <input type="range" id="verse-slider" min="1" max="47" value="1">
            <div id="verse-counter">1/47</div>
        </div>
        <button id="next-verse-btn">
            <i class="fas fa-chevron-right"></i>
        </button>
    </div>
    <div id="floating-audio-btn" style="display: none;">
        <div class="progress-ring">
            <svg class="progress-ring-svg" width="64" height="64">
                <circle
                    class="progress-ring-circle"
                    stroke="#A5252C"
                    stroke-width="2"
                    fill="transparent"
                    r="29"
                    cx="32"
                    cy="32"/>
            </svg>
            <button id="floating-play-pause">
                <i class="fas fa-play"></i>
            </button>
            <div id="floating-time">0:00</div>
        </div>
    </div>
    <div id="audio-controls" style="display: none;">
        <button id="play-pause-btn"><i class="fas fa-play"></i> Play</button>
        <input type="range" id="seek-slider" min="0" max="100" value="0">
        <span id="current-time">0:00</span> / <span id="duration">0:00</span>
    </div>
    <audio id="audio-player" preload="metadata"></audio>
    <footer id="footer">
        <p>ğŸ™ à¤¸à¤°à¥à¤µà¤§à¤°à¥à¤®à¤¾à¤¨à¥ à¤ªà¤°à¤¿à¤¤à¥à¤¯à¤œà¥à¤¯ à¤®à¤¾à¤®à¥‡à¤•à¤‚ à¤¶à¤°à¤£à¤‚ à¤µà¥à¤°à¤œ ğŸ™</p>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/js/all.min.js"></script>
    <script src="js/app-saarthi.js"></script>
    <script src="js/app.js"></script>
</body>
</html>