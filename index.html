<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bhagavad Gita</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="css/styles.css">
    <meta name="theme-color" content="#E6A623">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <header id="header">
        <button id="back-btn" style="display:none;"><i class="fas fa-arrow-left"></i></button>
        <h1>भगवद् गीता</h1>
        <button id="ai-btn">
            <img src="images/SarthiAI.png" alt="Sarthi AI" class="ai-icon-img">
        </button>
    </header>
    <main id="main-content">
        <div id="chapters-screen" class="screen active">
            <div id="chapters-list"></div>
        </div>
        <div id="verses-screen" class="screen">
            <h2 id="chapter-title"></h2>
            <div id="verses-list"></div>
        </div>
        <div id="verse-detail-screen" class="screen">
            <div id="verse-sanskrit-card" class="glass-card">
                <div id="verse-text"></div>
                <div id="verse-transliteration"></div>
            </div>
            
            <div id="verse-translation-card" class="glass-card">
                <div class="verse-card-header">
                    <div class="language-controls">
                        <div class="language-dropdown-container">
                            <select id="language-dropdown" class="language-dropdown">
                                <option value="english">English</option>
                                <option value="hindi" selected>हिंदी</option>
                                <option value="gujarati">ગુજરાતી</option>
                            </select>
                        </div>
                        <button id="sarthi-ai-pill" class="sarthi-ai-pill" title="AI-powered translation and summary">✨SarthiAI</button>
                    </div>
                    <button id="bookmark-btn" class="bookmark-btn" title="Bookmark this verse">
                        <i class="fas fa-heart"></i>
                    </button>
                </div>
                <div id="verse-translation"></div>
            </div>
        </div>
        <div id="ai-setup-screen" class="screen">
            <div class="glass-card ai-setup-card">
                <div class="ai-setup-header">
                    <img src="images/SarthiAI.png" alt="Sarthi AI" class="ai-icon-img ai-setup-icon">
                    <h2>Sarthi AI</h2>
                    <p>Your spiritual guide through the Bhagavad Gita</p>
                </div>
                <div class="ai-setup-content">
                    <p>To use Sarthi AI, please enter your Gemini API Key:</p>
                    <div class="api-key-input-group">
                        <input type="password" id="api-key-input" placeholder="Enter your Gemini API Key" />
                        <button id="toggle-api-key-visibility">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <button id="save-api-key-btn" class="ai-save-btn">Save & Continue</button>
                    <div class="api-key-help">
                        <p><small>Get your free API key from <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a></small></p>
                    </div>
                </div>
            </div>
        </div>
        <div id="ai-chat-screen" class="screen">
            <div id="ai-chat-container">
                <div id="ai-chat-header">
                    <img src="images/SarthiAI.png" alt="Sarthi AI" class="ai-icon-img">
                    <span>Sarthi AI</span>
                    <button id="clear-chat-btn" title="Clear Chat History">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                <div id="ai-chat-messages"></div>
                <div id="ai-starter-prompts">
                    <div class="starter-prompt" data-prompt="I am feeling lost and confused about my life purpose">
                        Life Purpose & Direction
                    </div>
                    <div class="starter-prompt" data-prompt="I am struggling with anger and negative emotions">
                        Anger & Emotional Control
                    </div>
                    <div class="starter-prompt" data-prompt="I am worried about results and outcomes of my actions">
                        Worry & Attachment to Results
                    </div>
                </div>
                <div id="ai-chat-input-container">
                    <input type="text" id="ai-chat-input" placeholder="Ask your question..." />
                    <button id="ai-send-btn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Settings Screen -->
        <div id="settings-screen" class="screen">
            <div class="glass-card settings-card">
                <div class="settings-header">
                    <h2>Settings</h2>
                    <p>Manage your app preferences</p>
                </div>
                <div class="settings-content">
                    <div class="setting-item">
                        <h3><img src="images/SarthiAI.png" alt="Sarthi AI" class="sarthi-icon"> Sarthi AI Configuration</h3>
                        <p>Enter your Google Gemini API key to enable AI-powered spiritual guidance and verse recommendations</p>
                        <div class="api-key-input-group">
                            <input type="password" id="settings-api-key-input" placeholder="sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxx" />
                            <button id="toggle-settings-api-key-visibility" title="Show/Hide API Key">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="api-key-help">
                            <small><i class="fas fa-info-circle"></i> Get your free API key from <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a></small>
                        </div>
                        <div class="api-key-buttons">
                            <button id="update-api-key-btn" class="api-key-btn" title="Update API Key">
                                <i class="fas fa-save"></i> Save
                            </button>
                            <button id="remove-api-key-btn" class="api-key-btn remove-btn" title="Remove API Key">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <h3>✨ Sarthi Translate</h3>
                        <p>Set your preferred language for AI-powered verse translation and summary</p>
                        <div class="language-preference-group">
                            <select id="sarthi-translate-language" class="language-select">
                                <option value="english">🇬🇧 English</option>
                                <option value="hindi">🇮🇳 हिंदी (Hindi)</option>
                                <option value="gujarati">🇮🇳 ગુજરાતી (Gujarati)</option>
                                <option value="bengali">🇮🇳 বাংলা (Bengali)</option>
                                <option value="tamil">🇮🇳 தமிழ் (Tamil)</option>
                                <option value="telugu">🇮🇳 తెలుగు (Telugu)</option>
                                <option value="marathi">🇮🇳 मराठी (Marathi)</option>
                                <option value="kannada">🇮🇳 ಕನ್ನಡ (Kannada)</option>
                                <option value="punjabi">🇮🇳 ਪੰਜਾਬੀ (Punjabi)</option>
                                <option value="spanish">🇪🇸 Español (Spanish)</option>
                                <option value="arabic">🇸🇦 العربية (Arabic)</option>
                                <option value="chinese">🇨🇳 中文 (Chinese)</option>
                            </select>
                        </div>
                        <button id="save-translate-language-btn" class="api-key-btn" title="Save Language Preference">
                            <i class="fas fa-save"></i> Save
                        </button>
                        <div class="api-key-help">
                            <small><i class="fas fa-info-circle"></i> This language will be used for AI-powered verse translations and summaries</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Bookmarks Screen -->
        <div id="bookmarks-screen" class="screen">
            <div class="bookmarks-header">
                <h2>Bookmarked Slokas</h2>
                <p>Your favorite verses from the Bhagavad Gita</p>
            </div>
            <div id="bookmarks-list" class="bookmarks-list">
                <!-- Bookmarked verses will be dynamically added here -->
            </div>
        </div>
    </main>
    
    <!-- Floating Settings/Bookmarks Button -->
    <div id="floating-settings-btn" class="floating-settings-btn">
        <button id="main-floating-btn" class="main-floating-btn">
            <i class="fas fa-cog"></i>
        </button>
        <div id="floating-menu" class="floating-menu">
            <button id="settings-btn" class="floating-option-btn" title="Settings">
                <i class="fas fa-cog"></i>
            </button>
            <button id="bookmarks-btn" class="floating-option-btn" title="Bookmarks">
                <i class="fas fa-heart"></i>
            </button>
        </div>
    </div>
    <div id="verse-navigation" style="display: none;">
        <button id="prev-verse-btn">
            <i class="fas fa-chevron-left"></i>
        </button>
        <div id="verse-slider-container">
            <input type="range" id="verse-slider" min="1" max="47" value="1">
            <div id="verse-counter">1/47</div>
        </div>
        <button id="next-verse-btn">
            <i class="fas fa-chevron-right"></i>
        </button>
    </div>
    <div id="floating-audio-btn" style="display: none;">
        <div class="progress-ring">
            <svg class="progress-ring-svg" width="64" height="64">
                <circle
                    class="progress-ring-circle"
                    stroke="#A5252C"
                    stroke-width="2"
                    fill="transparent"
                    r="29"
                    cx="32"
                    cy="32"/>
            </svg>
            <button id="floating-play-pause">
                <i class="fas fa-play"></i>
            </button>
            <div id="floating-time">0:00</div>
        </div>
    </div>
    <div id="audio-controls" style="display: none;">
        <button id="play-pause-btn"><i class="fas fa-play"></i> Play</button>
        <input type="range" id="seek-slider" min="0" max="100" value="0">
        <span id="current-time">0:00</span> / <span id="duration">0:00</span>
    </div>
    <audio id="audio-player"></audio>
    <footer id="footer">
        <p>🙏 सर्वधर्मान् परित्यज्य मामेकं शरणं व्रज 🙏</p>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/js/all.min.js"></script>
    <script src="js/app.js"></script>
</body>
</html>